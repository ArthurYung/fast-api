(window["webpackJsonpfast-api"]=window["webpackJsonpfast-api"]||[]).push([[7],{109:function(e,t,a){"use strict";var n=a(97),r=a.n(n),c=a(98),s=a(18),o=a(13),i=a(0),l=a.n(i),u=a(30),m=a(35),p=Object(u.b)(function(e){return{historyData:e.history}},function(e){return{deleteTimer:function(t){e(Object(m.c)(t))}}}),d=a(184),f=a(186),b=a(183),v=a(150),E=a(120),g=a.n(E),h=a(161),y=a(190),O=a(149),j=a(119),C=a.n(j),N=a(118),I=a.n(N),T=a(187),k=a(188);function x(e,t){if(Boolean(e)){var a={yyyy:(e=e instanceof Date?e:new Date(e)).getFullYear().toString(),mm:("0"+(e.getMonth()+1)).slice(-2),dd:("0"+e.getDate()).slice(-2),HH:("0"+e.getHours()).slice(-2),MM:("0"+e.getMinutes()).slice(-2),SS:("0"+e.getSeconds()).slice(-2)};return t||(t="yyyy-mm-dd HH:MM:SS"),t=t.replace(/d{1,4}|m{1,4}|yy(?:yy)?|H{1,2}|M{1,2}|S{1,2}/g,function(e){return e in a?a[e]:""})}return""}var w=function(e){var t=e.info,a=e.deleteTimer,n=e.collectTimer,r=Object(i.useState)(1),c=Object(o.a)(r,2),s=c[0],u=c[1],m=Object(i.useState)(null),p=Object(o.a)(m,2),E=p[0],j=p[1],N=Boolean(E),w=2===t.status?"result-error":"result-success",S=[];function D(){j(null)}return function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.forEach(function(t){S.push({name:a+t.name,useTime:t.useTime}),t.children.length&&e(t.children,t.name)})}(t.children),l.a.createElement("aside",{className:"result-card"},l.a.createElement(b.a,{in:Boolean(s)},l.a.createElement(d.a,null,l.a.createElement(f.a,{avatar:l.a.createElement(O.a,{"aria-label":"recipe",className:w},1===t.status?l.a.createElement(I.a,null):l.a.createElement(C.a,null)),action:l.a.createElement(v.a,{"aria-label":"settings",onClick:function(e){j(e.currentTarget)}},l.a.createElement(g.a,null)),title:t.name,subheader:x(t.date,"mm-dd HH:MM:SS"),className:"result-card-header"}),l.a.createElement(T.a,null,S.map(function(e,t){return l.a.createElement("div",{className:"result-card-item",key:t},l.a.createElement("span",{className:"card-item-root"},e.name),l.a.createElement("span",{className:"card-item-time"},e.useTime,"ms"))})),l.a.createElement(k.a,null),l.a.createElement(T.a,null,1===t.status?l.a.createElement("div",{className:"result-active-success"},"use: ",t.useTime,"ms"):l.a.createElement("div",{className:"result-active-error"},t.error)))),l.a.createElement(h.a,{id:"long-menu",anchorEl:E,keepMounted:!0,open:N,onClose:D,PaperProps:{style:{width:120}}},l.a.createElement(y.a,{onClick:function(){D(),n(t)}},"Collect"),l.a.createElement(y.a,{onClick:function(){u(0),D(),setTimeout(function(){return a(t)},300)}},"Delete")))},S=a(194),D=a(200),_=a(128),P=a.n(_),L=a(189),H=a(191),M=a(192),R=a(43),B=a(123),V=a.n(B),A=a(122),q=a.n(A),F=function(e){var t=e.replayCollect,a=e.deleteCollect,n=Object(i.useState)([]),s=Object(o.a)(n,2),u=s[0],m=s[1];function p(){return(p=Object(c.a)(r.a.mark(function e(t){var n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:if(1===e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Object(R.c)();case 7:n=e.sent,(c=n.data)&&m(c);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(i.useEffect)(function(){Object(R.c)().then(function(e){m(e.data)})},[]),l.a.createElement("aside",{className:"collector-box"},l.a.createElement(L.a,null,u.map(function(e){return l.a.createElement(H.a,{key:e.id},l.a.createElement(M.a,{primary:e.timerInfo.name,secondary:x(e.timerInfo.date)}),l.a.createElement(v.a,{edge:"end","aria-label":"play",onClick:function(){return t(e)}},l.a.createElement(q.a,null)),l.a.createElement(v.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e){return p.apply(this,arguments)}(e)}},l.a.createElement(V.a,null)))})))},J=a(95),W=a(41),$=a(12);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}t.a=p(Object($.f)(function(e){var t=e.historyData,a=e.deleteTimer,n=e.history,u=Object(i.useState)(!1),m=Object(o.a)(u,2),p=m[0],d=m[1],f=Object(i.useState)({type:"success",visible:!1,message:""}),b=Object(o.a)(f,2),v=b[0],E=b[1];function g(e){var t=e.type,a=e.message;E({type:t,message:a,visible:!0})}function h(e){var t=W.a.getDatabaseInfo(e.uid),a={timerInfo:e,codeInfo:t,type:t.type};Object(R.a)(a).then(function(){g({type:"success",message:"Saved timer record"})}).catch(function(e){g({type:"warn",message:String(e)})})}function y(){return(y=Object(c.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}return e.abrupt("return",0);case 2:return e.next=4,Object(R.b)(t.id);case 4:if(a=e.sent,!(n=a.error)){e.next=9;break}return g({type:"error",message:n}),e.abrupt("return",0);case 9:return e.abrupt("return",1);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}return l.a.createElement(i.Fragment,null,l.a.createElement("aside",{className:"history-box"},l.a.createElement("div",{className:"collector-button"},l.a.createElement(S.a,{variant:"extended","aria-label":"open",onClick:function(){d(!0)}},l.a.createElement(P.a,null),"Open Collector")),t.map(function(e){return l.a.createElement(w,{key:e.id,info:e,deleteTimer:a,collectTimer:h})})),l.a.createElement(D.a,{anchor:"right",open:p,onClose:function(){d(!1)}},l.a.createElement(F,{replayCollect:function(e){1===e.type?n.push({state:e.codeInfo,pathname:"/custom",search:"?type=1"+Date.now()}):2===e.type&&n.push({state:e.codeInfo,pathname:"/custom",search:"?type=2"+Date.now()}),d(!1)},deleteCollect:function(e){return y.apply(this,arguments)}})),l.a.createElement(J.a,{visible:v.visible,type:v.type,closed:function(){E(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},v,{visible:!1}))},message:v.message}))}))},131:function(e,t,a){e.exports={formInput:"custom_formInput__1vrEs",items:"custom_items__sKkq6",expressionInput:"custom_expressionInput__3waP-",apiInput:"custom_apiInput__dMDqN",radioLabel:"custom_radioLabel__2hRq_",radio:"custom_radio__3Cpkp"}},71:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(0),c=a.n(r),s=a(109),o=a(18),i=a(148),l=a(195),u=a(107),m=a.n(u),p=a(131),d=a.n(p),f=a(199),b=a(203),v=a(196),E=a(129),g=a.n(E),h=a(41),y=a(99),O=a(95);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var C=Object(y.a)(function(e){var t,a=e.progress,s=e.updateProgress,u=e.updateHistoryList,p=e.currentInfo,E=Object(r.useState)("50000"),y=Object(n.a)(E,2),C=y[0],N=y[1],I=Object(r.useState)(""),T=Object(n.a)(I,2),k=T[0],x=T[1],w=Object(r.useState)(""),S=Object(n.a)(w,2),D=S[0],_=S[1],P=Object(r.useState)(""),L=Object(n.a)(P,2),H=L[0],M=L[1],R=Object(r.useState)(),B=Object(n.a)(R,2),V=B[0],A=B[1],q=Object(r.useState)({type:"success",visible:!1,message:""}),F=Object(n.a)(q,2),J=F[0],W=F[1],$=g.a.highlight(V?V.baseCode:"",g.a.languages.javascript,"javascript"),z=g.a.highlight(V?V.initCode:"",g.a.languages.javascript,"javascript");return Object(r.useEffect)(function(){p&&(M(p.expression||""),x(p.root||""),_(p.key||""),A(p))},[p]),c.a.createElement("article",null,c.a.createElement("section",null,c.a.createElement("div",{className:"component-title"},"Use Expression"),c.a.createElement(l.a,{variant:"contained",color:"primary",onClick:function(){a||V&&(s(!0),setTimeout(function(){var e=V.fn(Number(C));e.id?(h.a.pushCustomApiInfo(V),u(e)):function(e){var t=e.type,a=e.message;W({type:t,message:a,visible:!0})}({type:"error",message:e.error}),s(!1)},200))}},"Run Test",c.a.createElement(m.a,null))),c.a.createElement("section",{className:d.a.items},c.a.createElement(i.a,{variant:"subtitle1",gutterBottom:!0},"Loop Count($n):"),c.a.createElement(b.a,{"aria-label":"gender",name:"gender1",className:d.a.radio,value:C,onChange:function(e,t){N(t)}},c.a.createElement(f.a,{value:"50000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"50000"),c.a.createElement(f.a,{value:"100000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"100000"),c.a.createElement(f.a,{value:"500000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"500000"),c.a.createElement(f.a,{value:"1000000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"1000000"),c.a.createElement(f.a,{value:"10000000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"10000000"))),c.a.createElement("section",{className:d.a.items},c.a.createElement(i.a,{variant:"subtitle1",gutterBottom:!0},"Expression:"),c.a.createElement("div",{className:d.a.formInput},c.a.createElement(v.a,{label:"Root Name",className:d.a.apiInput,onChange:function(e){x(e.currentTarget.value)},value:k,helperText:"set api root path if you input this"}),c.a.createElement(v.a,{label:"API Name",className:d.a.apiInput,onChange:function(e){_(e.currentTarget.value)},value:D,helperText:"api name in the replacement expression"}),c.a.createElement(v.a,{label:"Expression",className:d.a.expressionInput,onChange:function(e){M(e.currentTarget.value),function(e){clearTimeout(t),t=setTimeout(function(){var t=h.a.getBaseApiInfo(e,D,k);t&&A(t)},500)}(e.currentTarget.value)},value:H,helperText:"see expression rules"}))),c.a.createElement("section",{className:d.a.items},c.a.createElement(i.a,{variant:"subtitle1",gutterBottom:!0},"Before the timer begin code:"),c.a.createElement("pre",{className:"language-javascript pre-javascript",style:{minHeight:"40px"},dangerouslySetInnerHTML:{__html:z}})),c.a.createElement("section",{className:d.a.items},c.a.createElement(i.a,{variant:"subtitle1",gutterBottom:!0},"Code under test:"),c.a.createElement("pre",{className:"language-javascript pre-javascript",style:{minHeight:"40px"},dangerouslySetInnerHTML:{__html:$}})),c.a.createElement(O.a,{visible:J.visible,type:J.type,closed:function(){W(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},J,{visible:!1}))},message:J.message}))}),N=a(22),I=a(9),T=a(31),k=a(32),x=a(33),w=a(90),S=a.n(w),D=(a(153),a(154),a(155),a(156),a(157),a(158),a(159),a(160),function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(T.a)(this,Object(k.a)(t).call(this,e))).editorId=void 0,a.Editor=void 0,a.Doc=void 0,a.showHintTimeout=void 0,a.editorId=Date.now()+"",a.Editor=null,a.Doc=null,a}return Object(x.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById(this.editorId);this.Editor=S.a.fromTextArea(e,{lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,mode:"text/javascript",indentWithTabs:!0,lineWrapping:!0,theme:"dracula"}),this.Doc=this.Editor.getDoc(),this._bindEditorEvent(),this._initEditorValue()}},{key:"_initEditorValue",value:function(){this.props.value&&this.Doc.setValue(this.props.value)}},{key:"_bindEditorEvent",value:function(){var e=this;this.Editor.on("change",function(t,a){if("+input"===a.origin){if(clearTimeout(e.showHintTimeout),!function(e){return!!e&&(""!==e&&(" "!==e&&("="!==e&&"= "!==e)))}(Object(n.a)(a.text,1)[0]))return;e.showHintTimeout=setTimeout(function(){t.execCommand("autocomplete")},300)}})}},{key:"getEditorValue",value:function(){return this.Doc?this.Doc.getValue():""}},{key:"render",value:function(){return c.a.createElement("div",{className:"editor-content"},c.a.createElement("textarea",{id:this.editorId,name:"code",style:{border:"none"}}))}}]),t}(c.a.Component));var _=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(T.a)(this,Object(k.a)(t).call(this,e))).state=void 0,a.codeRef1=void 0,a.codeRef2=void 0,a.state={loopCount:"50000",messageInfo:{type:"success",visible:!1,message:""},initCodeRefValue1:e.currentInfo?e.currentInfo.initCode:"",initCodeRefValue2:e.currentInfo?e.currentInfo.baseCode:""},a.codeRef1=c.a.createRef(),a.codeRef2=c.a.createRef(),a}return Object(x.a)(t,e),Object(I.a)(t,[{key:"runCurrentApiTest",value:function(){var e=this,t=this.codeRef1.current.getEditorValue(),a=this.codeRef2.current.getEditorValue();this.props.progress||(t||a)&&(this.props.updateProgress(!0),setTimeout(function(){var n=h.a.createCustomInfo(a,t),r=n.fn(e.state.loopCount);r.id?(h.a.pushCustomApiInfo(n),e.props.updateHistoryList(r)):e.showMessage({type:"error",message:r.error}),e.props.updateProgress(!1)},200))}},{key:"handleChangeTime",value:function(e){this.setState({loopCount:e})}},{key:"showMessage",value:function(e){var t=e.type,a=e.message;this.setState({messageInfo:{visible:!0,type:t,message:a}})}},{key:"closeMessage",value:function(){this.setState({messageInfo:{visible:!1}})}},{key:"render",value:function(){var e=this;return c.a.createElement("article",null,c.a.createElement("section",null,c.a.createElement("div",{className:"component-title"},"Edit Custom Code"),c.a.createElement(l.a,{variant:"contained",color:"primary",onClick:function(){return e.runCurrentApiTest()}},"Run Test",c.a.createElement(m.a,null))),c.a.createElement("section",{className:d.a.items},c.a.createElement(i.a,{variant:"subtitle1",gutterBottom:!0},"Loop Count($n):"),c.a.createElement(b.a,{"aria-label":"gender",name:"gender1",className:d.a.radio,value:this.state.loopCount,onChange:function(t,a){return e.handleChangeTime(a)}},c.a.createElement(f.a,{value:"50000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"50000"),c.a.createElement(f.a,{value:"100000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"100000"),c.a.createElement(f.a,{value:"500000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"500000"),c.a.createElement(f.a,{value:"1000000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"1000000"),c.a.createElement(f.a,{value:"10000000",color:"primary"}),c.a.createElement("span",{className:d.a.radioLabel},"10000000"))),c.a.createElement("section",{className:d.a.items},c.a.createElement(i.a,{variant:"subtitle1",gutterBottom:!0},"Before the timer begin code:"),c.a.createElement("div",{className:d.a.editBox},c.a.createElement(D,{ref:this.codeRef1,value:this.state.initCodeRefValue1}))),c.a.createElement("section",{className:d.a.items},c.a.createElement(i.a,{variant:"subtitle1",gutterBottom:!0},"Code under test:"),c.a.createElement("div",{className:d.a.editBox},c.a.createElement(D,{ref:this.codeRef2,value:this.state.initCodeRefValue2}))),c.a.createElement(O.a,{visible:this.state.messageInfo.visible,type:this.state.messageInfo.type,closed:function(){return e.closeMessage()},message:this.state.messageInfo.message}))}}]),t}(c.a.Component),P=Object(y.a)(_),L=function(e){var t=e.currentTab,a=e.currentInfo;return c.a.createElement("div",{className:"custom-content-main"},c.a.createElement("div",{className:"custom-content-view"},"1"===t?c.a.createElement(C,{currentInfo:a}):c.a.createElement(P,{currentInfo:a})),c.a.createElement(s.a,null))},H=a(197),M=a(182),R=function(e){var t=e.currentTab,a=e.changeTab;return console.log(t),c.a.createElement(H.a,{orientation:"vertical",variant:"scrollable",indicatorColor:"primary",value:t,onChange:function(e,t){return a(t)},"aria-label":"Vertical tabs example",className:"custom-content-tabs"},c.a.createElement(M.a,{label:"Expression",value:"1"}),c.a.createElement(M.a,{label:"Edit loop",value:"2"}))};t.default=function(e){var t=e.location.state,a=Object(r.useState)("1"),s=Object(n.a)(a,2),o=s[0],i=s[1];return Object(r.useEffect)(function(){var t=e.location.search.match(/^\?type=(1|2)/);t&&t[1]!==o&&i(t[1])},[e.location.search,o]),c.a.createElement("div",{className:"custom-box"},c.a.createElement(R,{currentTab:o,changeTab:function(t){e.history.push({pathname:"/custom",search:"?type="+t})}}),c.a.createElement(L,{currentTab:o,currentInfo:t}))}},95:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(202),s=a(193),o=a(125),i=a.n(o),l=a(126),u=a.n(l),m=a(124),p=a.n(m),d=a(127),f=a.n(d),b=function(e){var t=e.type;return"success"===t?r.a.createElement(p.a,null):"warn"===t?r.a.createElement(i.a,null):"error"===t?r.a.createElement(u.a,null):r.a.createElement(f.a,null)};t.a=function(e){var t=e.message,a=e.visible,n=e.closed,o=e.type,i=void 0===o?"info":o;return r.a.createElement("span",null,r.a.createElement(c.a,{anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:3e3,open:a,onClose:function(e,t){"clickaway"!==t&&n()},className:"message-box-"+i},r.a.createElement(s.a,{className:"message-content","aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:"message-content-txt"},r.a.createElement(b,{type:i}),t)})))}},99:function(e,t,a){"use strict";var n=a(30),r=a(45),c=a(35);t.a=Object(n.b)(function(e){return{progress:e.progress}},function(e){return{updateProgress:function(t){e(Object(r.b)(t))},updateHistoryList:function(t){e(Object(c.d)(t))}}})}}]);
//# sourceMappingURL=7.b4bd41fe.chunk.js.map